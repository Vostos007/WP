# WP - Скрипт соотнесения вариаций товаров WooCommerce

Скрипт для автоматизации процесса управления вариациями товаров, их цветами и изображениями в WooCommerce.

## Функциональность

Этот скрипт выполняет следующие действия:

1. Считывает информацию о соответствии артикулов и цветов из текстового файла
2. Находит вариации товаров в WooCommerce по артикулу
3. Устанавливает правильное значение атрибута color для вариаций
4. Ищет соответствующие изображения в директории на основе названия модели и номера цвета
5. Присваивает найденные изображения к вариациям товаров

## Требования

- WordPress с установленным и активированным WooCommerce
- Доступ к файловой системе сервера
- Плагин WPCode или другой способ выполнения PHP-кода в WordPress

## Формат данных

### Файл соответствий (TXT)

Файл соответствий должен иметь следующий формат:

```
Название продукта
артикул номер_цвета / название_цвета
артикул номер_цвета / название_цвета
...

Название другого продукта
артикул номер_цвета / название_цвета
...
```

Пример:
```
Drops Soft Tweed
nOyBG8vJiyYxgwnsoqoAb3 01 / off white uni
...
```

### Структура директорий с изображениями

Изображения должны быть организованы в директориях, где название директории содержит название модели продукта. Файлы изображений должны содержать номер цвета (например, "01.jpg", "01-2.jpg").

## Настройка

Перед использованием скрипта необходимо настроить следующие параметры:

1. Путь к файлу соответствий (`$correspondence_file`)
2. Путь к директории с изображениями (`$images_directory`)
3. При необходимости, изменить логику извлечения названия модели в функции `extract_model_name()`

## Использование

1. Загрузите папку с фотографиями в корень сайта или другую доступную директорию
2. Загрузите файл соответствий на сервер
3. Настройте пути в скрипте
4. Выполните скрипт через WPCode или другим способом

## Логирование

Скрипт создает подробный лог своей работы, который поможет отследить успешность выполнения и найти возможные проблемы.

---

## Расширение функциональности

Для адаптации скрипта под ваши конкретные потребности, возможно, потребуется изменить:

1. Регулярное выражение для разбора строк файла соответствий
2. Логику поиска директорий с изображениями
3. Правила выбора изображений

## Техническая поддержка

Для вопросов и улучшений используйте раздел Issues данного репозитория.